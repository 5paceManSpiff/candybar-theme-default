global-reset()
reset-html5()

// Global settings
font-main = sans-serif
font-icons = 'Elusive-Icons'
width = 100%
height = 26px
progress-size = 50px
urgent-color = #f30
error-col = #d32
warning-col = #e92
notification-color = #25a

// background can be any color or your background image of choice (url('...'))
// set .blur and/or .desaturate on the body element to blur/desaturate the background image
statusline-background = #111
blur-radius = 3px

@font-face
	src: url('static/font/Elusive-Icons.svg') format('svg')
	font-family: font-icons
	font-style: normal
	font-weight: normal

@keyframes bubble
	0%
		transform: scale(0)
	50%
		transform: scale(2)
	100%
		transform: scale(1)

@keyframes bg-move
	0%
		background-position: 0 0
	100%
		background-position: progress-size progress-size

@keyframes urgent-pulse
	0%
		background: darken(urgent-color, 20)
		text-shadow: 0 0 10px urgent-color, 0 0 5px urgent-color, 0 0 5px urgent-color, 0 0 2px #fff
	40%
		background: darken(urgent-color, 30)
		text-shadow: none
	80%, 100%
		background: darken(urgent-color, 20)
		text-shadow: 0 0 10px urgent-color, 0 0 5px urgent-color, 0 0 5px urgent-color, 0 0 2px #fff

html, body
	font: 14px font-main
	background: #000
	cursor: default
	overflow: hidden
	-webkit-user-select: none

.hide
	display: none !important

.icon::before
	background: linear-gradient(top, rgba(#fff, .7), rgba(#fff, .4))
	display: inline-block
	font-family: font-icons
	font-weight: normal
	height: height
	line-height: height
	width: height
	vertical-align: middle
	-webkit-background-clip: text
	-webkit-text-fill-color: transparent

#statusline-bg
	background: statusline-background
	position: absolute
	width: width
	height: height
	top: 0
	left: 0
	z-index: 10
	&.blur
		background-position: blur-radius blur-radius
		top: -(blur-radius)
		height: @height + (blur-radius * 4)
		-webkit-filter: blur(blur-radius)
	&.desaturate
		-webkit-filter: grayscale(100%)
	&.blur.desaturate
		-webkit-filter: blur(blur-radius) grayscale(100%)

#statusline
	// this overlay works pretty well both with and without background images
	opacity = .6
	border-top: 1px solid rgba(#fff, 1 - opacity - .2)
	border-bottom: 1px solid rgba(#000, opacity)
	background: linear-gradient(top, rgba(#333, opacity), rgba(#000, opacity))

	position: relative
	z-index: 11
	width: width
	height: height - 2px
	color: #fff
	.widget, div, ul, li, span
		display: inline-block
		vertical-align: top
		white-space: nowrap
		line-height: height - 1px
	#left
		float: left
		& > div:not(:first-child),
		& > ul:not(:first-child)
			margin: 0 0 0 20px
	#right
		float: right
		.widget
			position: relative
			margin: 0 0 0 10px
			padding: 0 0 0 10px
			border-left: 1px solid rgba(#fff, .1)
			&:before
				display: inline-block
				height: height
				width: 1px
				background: rgba(#000, .8)
				content: ''
				position: absolute
				left: -2px
				top: 0
			&:last-child
				margin-right: 10px

.widget
	.progress
		margin: 0 10px 0 0
		background: linear-gradient(top, rgba(#fff, .15), rgba(#fff, .3))
		width: 100px
		position: relative
		box-shadow: 0 -1px 0 #000, 0 1px 0 rgba(#fff, .4)
		height: 5px
		border-radius: 2px
		display: inline-block
		top: (height / 2) - (@height / 2)
		.bar
			height: @height
			border-radius: @border-radius
			background: linear-gradient(top, rgba(#fff, .7), rgba(#fff, .3))
			position: absolute
	&.popup
		.widget-icon
			text-align: center
		.popup-contents
			overflow: hidden
			max-width: 0
			overflow: hidden
			transition: all .2s ease, opacity .1s linear
			opacity: 0
		.widget-icon:hover + .popup-contents,
		.popup-contents:hover
			opacity: 1
			max-width: 100px
	&#desktops
		li
			cursor: pointer
			position: relative
			height: height
			width: height
			text-align: center
			color: rgba(#fff, .9)
			background: linear-gradient(top, transparent 0%, transparent 50%, rgba(#fff, .9) 50%, rgba(#fff, .7)) 0 0
			background-size: height (height * 2)
			transition: all .1s linear
			&:hover
				color: #fff
			&.urgent
				animation: urgent-pulse 1.5s linear infinite
				color: #fff !important
				font-weight: bold
			&.has-windows
				&::after
					position: absolute
					content: ''
					width: 6px
					height: 6px
					top: 1px
					right: 1px
					background: linear-gradient(45deg, transparent, transparent 50%, rgba(#fff, .3) 50%, rgba(#fff, .4) 60%, transparent 60%)
			&.selected
				background-position: 0% (-(height))
				color: rgba(#000, .9)
				text-shadow: 0 1px 0 rgba(#fff, .7)
				font-weight: bold
				&.has-windows
					&::after
						background: linear-gradient(45deg, transparent, transparent 50%, rgba(#000, .5) 50%)
	&#window
		max-width = 500px
		max-width: max-width
		overflow: hidden
		text-overflow: clip
		-webkit-mask-image: -webkit-linear-gradient(left, rgba(#000, 1), rgba(#000, 1) max-width - 50px, rgba(#000, 0) max-width)
	&#datetime
		.icon::before
			content: '\e622'
		margin: 0 10px 0 0
		.date
			color: rgba(#fff, .85)
			margin: 0 10px 0 0
		.time
			font-weight: bold
	&#now_playing
		.icon::before
			content: '\e67e'
		.status-icon
			&::before
				content: '\e673'
			&.playing::before
				content: '\e666'
		.time
			margin: 0 10px 0 0
			.total_time
				font-size: 10px
				opacity: .8
				vertical-align: middle
				&:before
					content: ' / '
		.song
			width = 300px
			max-width: width
			height: height
			overflow: hidden
			text-overflow: clip
			-webkit-mask-image: -webkit-linear-gradient(left, rgba(#000, 1), rgba(#000, 1) width - 30px, rgba(#000, 0) width)
			.artist
				display: inline
				opacity: .8
				&::after
					content: 'â€º'
					margin: 0 5px
					opacity: .6
			.title
				display: inline
	&#volume
		.icon
			&.high::before
				content: '\e60b'
			&.medium::before
				content: '\e637'
			&.low::before
				content: '\e60d'
			&.off::before
				content: '\e60c'
				background-color: error-col
	&#weather
		.icon
			height: height - 4px
			width: height - 4px
			vertical-align: middle
		.temp
			margin: 0 0 0 5px
			&.c::after
				content: '\00b0 C'
			&.f::after
				content: '\00b0 F'
			&.k::after
				content: 'K'
	&#external_ip
		.icon::before
			content: '\e6b5'
		.ip
			cursor: auto
			-webkit-user-select: text
	&#notifications
		.icon
			&.pending
				color: lighten(notification-color, 50)
				font-weight: bold
				animation: bubble .3s ease-out
				position: relative
				z-index: 20
				&::before
					content: '\e699'
					background-color: notification-color
					width: height - 4px
		.notification
			max-width: 0
			overflow: hidden
			opacity: 0
			transition: all .2s ease, opacity .1s linear
			.contents
				cursor: pointer
				border-radius: 2px
				background: linear-gradient(top, lighten(notification-color, 10), darken(notification-color, 10))
				color: #fff
				padding: 0 10px
				margin: 0 0 0 10px
				height: height - 2px
				font-size: 13px
				text-shadow: 0 -1px 0 rgba(#000, .8)
				box-shadow: inset 0 1px 1px rgba(#fff, .3), inset 0 -1px 1px rgba(#000, .3)
				.summary
					font-weight: bold
					margin: 0 10px 0 0
				.body
					color: rgba(#fff, .8)
				.close::before
					font-family: font-icons
					font-weight: normal
					content: '\e700'
					color: rgba(#fff, .7)
					margin: 0 0 0 10px
		.pending:hover + .notification,
		.notification:hover
			opacity: 1
			max-width: 300px
